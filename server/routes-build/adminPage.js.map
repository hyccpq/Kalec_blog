{"version":3,"sources":["../routes/adminPage.js"],"names":["controller","get","fs","resolve","getDirname","condition","process","env","NODE_ENV","AdminControllers","adminPage","ctx","next","response","type","body","createReadStream","import","meta","__dirname","error","console","log"],"mappings":";;;;AAAA,SAASA,UAAT,EAAqBC,GAArB,QAAgC,qBAAhC;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,SAASC,OAAT,QAAwB,MAAxB;AACA,SAASC,UAAT,QAA2B,gBAA3B;AAEA,MAAMC,SAAS,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAA9B;IAGqBC,gB,WADpBT,UAAU,CAAC,QAAD,C,UAERC,GAAG,CAAC,GAAD,C,2BAFN,MACqBQ,gBADrB,CACsC;AACpC,QACMC,SADN,CACgBC,GADhB,EACqBC,IADrB,EAC2B;AACzB,QAAI;AACF,UAAIP,SAAS,KAAK,oBAAlB,EAAwC;AACtC,cAAMO,IAAI,EAAV;AACD,OAFD,MAEO;AACLD,QAAAA,GAAG,CAACE,QAAJ,CAAaC,IAAb,GAAoB,MAApB;AACAH,QAAAA,GAAG,CAACE,QAAJ,CAAaE,IAAb,GAAoBb,EAAE,CAACc,gBAAH,CAClBb,OAAO,CACLC,UAAU,CAACa,MAAM,CAACC,IAAR,CAAV,CAAwBC,SADnB,EAEL,+BAFK,CADW,CAApB;AAMD,OAXC,CAaF;AACA;AACA;AACA;AACA;AACA;AACA;;AACD,KApBD,CAoBE,OAAOC,KAAP,EAAc;AACdR,MAAAA,IAAI,CAACQ,KAAD,CAAJ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF;;AA3BmC,C;SAAjBX,gB","sourcesContent":["import { controller, get } from '../lib/decorator.js'\nimport fs from 'fs'\nimport { resolve } from 'path'\nimport { getDirname } from '../lib/file.js'\n\nconst condition = process.env.NODE_ENV\n\n@controller('/admin')\nexport default class AdminControllers {\n  @get('*')\n  async adminPage(ctx, next) {\n    try {\n      if (condition === 'development:manage') {\n        await next()\n      } else {\n        ctx.response.type = 'html'\n        ctx.response.body = fs.createReadStream(\n          resolve(\n            getDirname(import.meta).__dirname,\n            '../../public/dist/manage.html'\n          )\n        )\n      }\n\n      // ctx.manageWebViewConf\n      // console.log(ctx.manageWebViewConf)\n      // if (ctx.manageWebViewConf) {\n      //     ctx.response.type = 'html'\n      //     ctx.response.body = ctx.manageWebViewConf.devMiddleware.devMiddleware.fileSystem.createReadStream(ctx.manageWebViewConf.filename)\n      // }\n      // await ctx.render('manage.ejs')\n    } catch (error) {\n      next(error)\n      console.log(error)\n    }\n  }\n}\n"],"file":"adminPage.js"}